{"version":3,"sources":["../../src/db/index.js"],"names":["connect","Promise","resolve","reject","global","connection","on","error","info","connections","mongo","uri","options"],"mappings":";;;;;kBAOwBA,O;;AAJxB;;;;AACA;;;;AACA;;;;;;AAEe,SAASA,OAAT,GAAmB;;AAE9B,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,2BAASF,OAAT,GAAmBG,OAAOH,OAA1B;AACA,2BAASI,UAAT,CACKC,EADL,CACQ,OADR,EACiB,UAACC,KAAD;AAAA,mBAAWJ,OAAOI,KAAP,CAAX;AAAA,SADjB,EAEKD,EAFL,CAEQ,OAFR,EAEiB;AAAA,mBAAM,iBAAOE,IAAP,CAAY,6BAAZ,CAAN;AAAA,SAFjB,EAGKF,EAHL,CAGQ,MAHR,EAGgB;AAAA,mBAAMJ,QAAQ,mBAASO,WAAT,CAAqB,CAArB,CAAR,CAAN;AAAA,SAHhB;;AAKA,2BAAST,OAAT,CAAiB,iBAAOU,KAAP,CAAaC,GAA9B,EAAmC,iBAAOD,KAAP,CAAaE,OAAhD;AACH,KARM,CAAP;AASH,C,CAlBD","file":"index.js","sourcesContent":["/**\n * Created by chen on 17-8-21.\n */\nimport mongoose from 'mongoose';\nimport logger from '../logger';\nimport config from '../config';\n\nexport default function connect() {\n\n    return new Promise((resolve, reject) => {\n        mongoose.Promise = global.Promise;\n        mongoose.connection\n            .on('error', (error) => reject(error))\n            .on('close', () => logger.info('Database connection closed.'))\n            .on('open', () => resolve(mongoose.connections[0]));\n\n        mongoose.connect(config.mongo.uri, config.mongo.options);\n    });\n}"]}